\section{Summary}
NFV brought innovation in telecommunication network by virtualizing NF and therefore adding flexibility in NF deployment. However, virtualization involves overhead in terms of memory copy and resource consumption. In order to eliminate these overhead as much as possible, we proposed lightweight NF chaining mechanism in kernel. The main idea of this proposal is that only complicated NFs are placed in user space and other simple NFs should be chained inside kernel. 

Among proposed architecture, the NF chaining in the kernel space is implemented. NF consists of kernel module(s) and the function in the modules are registered to make a NF chain. The rule that decides which flow to pass specific NF chain is implemented by Filter table in Netfilter. User on the host can make a new NF chain or insert a NF in preexisting chain. By specifying rule for the chain, desired flow will be processed by the NF chain. 

Two NFs, DoS Attack Denial (DAD) and DNAT, are implemented to test the chaining mechanism. DAD counts received packets per flow and trigger blocking of the traffic if the count exceeds a threshold. DNAT changes the destination address and was coordinated with connection tracking system in the Netfitler to achieve stateful process. 

Basic performance is evaluated by chaining the above two NFs. When two flows at 1Gbps rate are processed by the NF chain, resource consumption is measured. Memory usage raised only by a few tens of kilobytes compared to when the host is idle. And the CPU utilization remained 0\% when processing. By this measurement, we could confirm that our NF chaining can be realized with very lightly in terms of CPU, memory usage. 

\section{Future work}
The proposed architecture at this point only supports per packet process. For NF like ALG that need to read the original application payload, the mechanism to reassemble split packets is necessary. The mechanism could be structured as follows: Every time a packet arrives, a kernel thread is created. If the packet is not the last one to make the original payload, the thread is suspended by condition variable and the packet is inserted in a buffer. When the last packet arrives, the process of NF finally starts by passing the reassembled packets from the buffer. After completing the process the kernel threads is restarted so the suspended packets are free to proceed. 